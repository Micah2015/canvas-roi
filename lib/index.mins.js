!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).EsUtil={})}(this,(function(t){"use strict";var e=["mount","resetOptions","resetCanvas","scale","invert","setValue","clearCanvas","redrawCanvas","exportImageFromCanvas","customDrawing","choosePath","destroy"],i=["ready","input","change","choose","resize","draw-start","draw-end","modify-start"],s=["point","line","polygon"],n=["rect","circle"];function a(t,e){var i=(t.x+e.x)/2,s=(t.y+e.y)/2,n=[Math.abs(t.x-e.x),Math.abs(t.y-e.y)],a=n[0],o=n[1];return[{x:i-a/2,y:s-o/2},{x:i+a/2,y:s+o/2}]}function o(t){return 2===t.length?[t[0],{x:t[1].x,y:t[0].y},t[1],{x:t[0].x,y:t[1].y}]:t}function r(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function h(t,e){return t.x===e.x&&t.y===e.y}function c(t){return{x:t.offsetX,y:t.offsetY}}function l(t){for(var e in t)this["_"+e]=t[e]}var p=function(t){return{type:Boolean,default:t}},u=function(t){return{type:Object,default:function(){return t}}},d=function(t){return{type:Number,default:t}};function v(){return{readonly:p(!1),canvasScale:d(2),globalStyles:u({lineWidth:2,strokeStyle:"rgba(14, 126, 226, 1)",fillStyle:"rgba(14, 126, 226, 0.6)"}),focusStyles:u(null),operateFocusOnly:p(!0),operateCircle:u({styles:{fillStyle:"rgba(255, 255, 255, 0.9)"},radius:4}),sensitive:u({line:4,point:3}),allowTypes:(t=["point","line","circle","rect","polygon"],{type:Array,default:function(){return t}}),singleType:p(!1),currentType:{type:String,default:""},pathCanMove:p(!0),digits:d(3),distanceCheck:d(10),tinyRectSize:d(4),rectAspectRatio:d(0),tinyCircleRadius:d(6),blurStrokeOpacity:d(.5),ignoreInvalidSelect:p(!1),rectCursors:u({side:["ns-resize","ew-resize","ns-resize","ew-resize"],corner:["nw-resize","ne-resize","se-resize","sw-resize"]}),maxPath:d(0),initChoseIndex:d(-1),width:{type:Number},height:{type:Number},autoFit:p(!1)};var t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var f=function(){return(f=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function y(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var s=Array(t),n=0;for(e=0;e<i;e++)for(var a=arguments[e],o=0,r=a.length;o<r;o++,n++)s[n]=a[o];return s}function x(t){var e=this.newPath.points[0],i=this.$opts.rectAspectRatio;return i>0?{x:t.x,y:e.y+i*(t.x-e.x)}:t}function g(t){!this.dragging&&(this.dragging=!h(this.newPath.points[0],c(t)));var e=c(t);this._drawRoiPaths("rect"===this.newPath.type?x.call(this,e):e)}function $(t,e,i){var s=this.$opts,n=s.distanceCheck,a=s.canvasScale,o=i||n;return"function"==typeof o?o(t,e):Math.abs(t.x-e.x)<o*a&&Math.abs(t.y-e.y)<o*a}function w(t){var e=c(t),i=this.newPath.points;if(this.pathPointsCoincide=!1,i.length>2){var s=i[0];$.call(this,e,s)&&(e=s,this.pathPointsCoincide=!0)}this._drawRoiPaths(e)}function P(t,e,i){t.splice(i+1,0,e),Object.assign(this.operateCursor,{pointIndex:i+1,lineIndex:-1})}function _(t){var e=c(t),i=this.operateCursor||{},s=i.startPoint,n=i.pathIndex,a=i.pointIndex,o=i.lineIndex,r=i.inPath;if(this.paths[n]){var h=this.paths[n],l=h.type,p=h.points;if(!r&&"circle"===l)return p[1]=e,void this._drawRoiPathsWithOpe(e);var u=[e.x-s.x,e.y-s.y];this.operateCursor.startPoint=e;var d,v="rect"===l,f=function(t,e,i){!e&&(t.x+=u[0]),!i&&(t.y+=u[1])};if(r)return p.forEach((function(t){return f(t)})),void this._drawRoiPaths();if(a>=0){return v?1===(d=a)?(p[0].y+=u[1],p[1].x+=u[0]):3===d?(p[0].x+=u[0],p[1].y+=u[1]):f(p[d/2]):f(p[a]),void this._drawRoiPathsWithOpe(!v&&e)}o>=0&&(v?o%3==0?f(p[0],0===o,3===o):f(p[1],2===o,1===o):P.call(this,p,e,o),this._drawRoiPathsWithOpe(!v&&e))}}function m(t,e){for(var i=t.length,s=this.$opts,n=s.canvasScale,a=s.sensitive.point,o=0;o<i;o+=1){var r=t[o],h=t[(o+1)%i],c=a*n,l=$.call(this,r,e,c)?o:$.call(this,h,e,c)?o+1:-1;if(l>-1)return{pointIndex:l};if(this.$ctx.beginPath(),this.$ctx.moveTo(r.x,r.y),this.$ctx.lineTo(h.x,h.y),this.$ctx.closePath(),this.$ctx.isPointInStroke(e.x,e.y))return{lineIndex:o}}return null}function C(t,e,i,s){var n=t.type,a=t.points,r=this.$opts,h=r.canvasScale,c=r.sensitive.line,l=r.pathCanMove;this.$ctx.save(),this.$ctx.lineWidth=c*h;var p=!1;if("rect"===n||"polygon"===n){var u="rect"===n?o(a):a,d=m.call(this,u,e);d&&(p=!0)&&(this.operateCursor=f({pathType:n,pathIndex:i},d))}else"circle"===n&&(this._createCvsPath(n,a),(p=this.$ctx.isPointInStroke(e.x,e.y))&&(this.operateCursor={pathType:"circle",pathIndex:i}));if(l&&s){this._createCvsPath(n,a);var v="line"===n?"isPointInStroke":"isPointInPath";(p=this.$ctx[v](e.x,e.y))&&(this.operateCursor={pathType:n,pathIndex:i,inPath:!0})}return this.$ctx.restore(),p}function b(t){var e=this,i=t?c(t):null;this.operateCursor=null,this.$cvs.style.cursor="inherit";var s=this.paths,n=this.choseIndex;this.$opts.operateFocusOnly?s[n]&&(C.call(this,s[n],i,n),!this.operateCursor&&C.call(this,s[n],i,n,!0)):(this.paths.some((function(t,s){return C.call(e,t,i,s)})),!this.operateCursor&&this.paths.some((function(t,s){return C.call(e,t,i,s,!0)})));var a=!1;if(this.operateCursor){var o=this.operateCursor,r=o.pathType,h=o.lineIndex,l=o.pointIndex,p=o.inPath,u=o.pathIndex;if(p||"rect"!==r)p?u===n&&(this.$cvs.style.cursor="move"):a=!0;else{var d=this.$opts.rectCursors,v=d.side,f=d.corner;this.$cvs.style.cursor=l>-1?f[l]:v[h]}}this._drawRoiPathsWithOpe(a&&i)}function S(t){if(!this.drawing){var e=c(t);this._createNewPath(e,"point",!1),this._addNewPath()}}function O(t){if(this.drawing){var e=c(t);this.newPath.points.push(e),this._addNewPath()}else{var i=c(t);this._createNewPath(i,"line",!1)}}function E(t){if(this.drawing)if(this.pathPointsCoincide)this._addNewPath();else{var e=c(t);this.newPath.points.push(e)}else{var i=c(t);this._createNewPath(i,"polygon",!1)}}function I(t){var e=this.newPath,i=e.type,s=e.points,n=s[0];"rect"===i?this.newPath.points=a(n,t):"circle"===i&&s.push(t),this._addNewPath()}function T(t,e){var i=this.$opts,s=i.tinyRectSize,n=i.tinyCircleRadius,a=i.canvasScale,o=this.newPath.type,c="rect"===o?s:n;return c>0?"rect"===o?Math.abs(t.x-e.x)>c*a&&Math.abs(t.y-e.y)>c*a:r(t,e)>c*a:!h(t,e)}function M(t){var e=this;this.$ctx.save();var i=this.paths.findIndex((function(i){e._createCvsPath(i.type,i.points);var s="line"===i.type?"isPointInStroke":"isPointInPath";return e.$ctx[s](t.x,t.y)}));return this.$ctx.restore(),i}function k(t){var e=M.call(this,t);(!this.$opts.ignoreInvalidSelect||-1!==e)&&this.choosePath(e)}var R={keyPress:function(t){switch(t.key.toLowerCase()){case"backspace":case"delete":this._deletePath();break;case"t":this._invertChosePath()}},cvsMouseUp:function(t){var e=c(t);this.drawing&&this.needDrag&&this.dragging?T.call(this,this.newPath.points[0],e)?I.call(this,"rect"===this.newPath.type?x.call(this,e):e):this._resetNewPath():this.modifying?(this.modifying=!1,!h(this.operateCursor.originStartPoint,e)&&this._emitValue("modify",this.choseIndex)):this.$opts.readonly?(k.call(this,e),this._drawRoiPaths()):t.shiftKey||this.$opts.singleType&&this.curSingleType||(this._resetNewPath(),k.call(this,e),b.call(this,t))},cvsMouseDown:function(t){if(t.preventDefault(),!(t.buttons>=2)){if(this.operateCursor&&(!this.operateCursor.inPath||this.operateCursor.pathIndex===this.choseIndex))return this.modifying=!0,this._emitEvent("modify-start",t),this.operateCursor.originStartPoint=c(t),void(this.operateCursor.startPoint=c(t));if(!this._isPathMax()&&this._isSingleTypeAllow(!0)&&(this.$opts.singleType||!t.shiftKey)){var e=this.curSingleType||(t.ctrlKey?"circle":"rect");if(this.$opts.allowTypes.includes(e)){var i=c(t);this._createNewPath(i,e),this._drawRoiPaths()}}}},cvsMouseMove:function(t){var e=this,i=e.drawing,s=e.needDrag,n=e.dragging,a=e.modifying,o=e.lastMoveEvent;(i&&s&&n||a)&&1!==t.buttons?this.cvsMouseUp(o):(i?s?g.call(this,t):w.call(this,t):a?_.call(this,t):b.call(this,t),this.lastMoveEvent=t)},cvsMouseClick:function(t){t.preventDefault(),this.$cvs.focus();var e=this.drawing,i=this.needDrag,n=this.modifying;if(!(this._isPathMax()||!this._isSingleTypeAllow()||e&&i||n)){var a=c(t);if("contextmenu"===t.type)e&&("polygon"===this.newPath.type?this.newPath.points.pop():this._resetNewPath());else{var o=this.$opts,r=o.singleType,h=o.allowTypes;if(r&&s.includes(this.curSingleType)&&h.includes(this.curSingleType))switch(this.curSingleType){case"polygon":E.call(this,t);break;case"point":S.call(this,t);break;case"line":O.call(this,t)}else!r&&t.shiftKey&&h.includes("polygon")&&this.drawingPolygon(t)}this._drawRoiPaths(a)}},checkMouseCanOperate:b};function j(){this.$ctx.clip(),this.clearCanvas()}function z(t,e){if(t){var i=t.type,s=t.points.concat(e?[e]:[]);s.length<2||(this.$ctx.save(),this.$ctx.fillStyle="rgba(255, 255, 255, 0.2)",this._createCvsPath(i,s,"polygon"===i),this.$ctx.fill(),"polygon"!==i&&this.$ctx.stroke(),"polygon"===i&&N.call(this,s),this.$ctx.restore())}}function N(t){var e=this;this.$ctx.save(),t.forEach((function(t){e.$ctx.beginPath(),e.$ctx.arc(t.x,t.y,1.4*e.$ctx.lineWidth,0,2*Math.PI),e.$ctx.fillStyle=e.$ctx.strokeStyle,e.$ctx.fill()})),this.$ctx.restore()}function V(t){this.$ctx.save(),this.$ctx.beginPath();var e=this.$opts,i=e.operateCircle,s=i.radius,n=i.styles,a=e.canvasScale;n&&Object.assign(this.$ctx,n),this.$ctx.arc(t.x,t.y,s*a,0,2*Math.PI),this.$ctx.stroke(),this.$ctx.fill(),this.$ctx.restore()}var A={setCtxStyles:function(){var t=this.$opts,e=t.globalStyles,i=t.canvasScale;this.$ctx&&Object.assign(this.$ctx,e,{lineWidth:e.lineWidth*i})},createCvsPath:function(t,e,i){var s=this;switch(this.$ctx.beginPath(),t){case"point":this.$ctx.arc(e[0].x,e[0].y,1.4*this.$ctx.lineWidth,0,2*Math.PI);break;case"line":case"rect":case"polygon":("rect"===t?o(e):e).forEach((function(e,n){var a=e.x,o=e.y;0===n?s.$ctx.moveTo(a,o):s.$ctx.lineTo(a,o),i&&"polygon"===t&&s.$ctx.stroke()}));break;case"circle":var n=e[0],a=r(n,e[1]);this.$ctx.arc(n.x,n.y,a,0,2*Math.PI)}this.$ctx.closePath()},drawExistRoiPath:function(t,e,i,s){void 0===i&&(i=!0),void 0===s&&(s=!0),this.$ctx.save();var n=t.type,a=t.points,o=t.styles,r=t.inner;if(a&&!(a.length<1)){var h=this.$opts,c=h.blurStrokeOpacity,l=h.focusStyles;o&&Object.assign(this.$ctx,o),this._createCvsPath(n,a),l?e===this.choseIndex&&Object.assign(this.$ctx,l):this.$ctx.globalAlpha=e!==this.choseIndex?c:1,"point"===n?(this.$ctx.fillStyle=this.$ctx.strokeStyle,this.$ctx.fill()):s&&(r?this.$ctx.fill():j.call(this)),"point"!==n&&i&&this.$ctx.stroke(),!this.$opts.readonly&&"polygon"===n&&N.call(this,a),!l&&(this.$ctx.globalAlpha=1),this.$ctx.restore()}},drawRoiPaths:function(t,e){var i=this;!e&&this.clearCanvas(),this.hasInvertPath=this.paths.some((function(t){return!t.inner})),this.hasInvertPath?(this.$ctx.fillRect(0,0,this.$cvs.width,this.$cvs.height),this.paths.forEach((function(t,e){return!t.inner&&i._drawExistRoiPath(t,e,!1)})),this.paths.forEach((function(t,e){return i._drawExistRoiPath(t,e,!0,t.inner)}))):this.paths.forEach((function(t,e){return i._drawExistRoiPath(t,e)})),this.drawing&&z.call(this,this.newPath,t)},drawRoiPathsWithOpe:function(t){this._drawRoiPaths(),t&&V.call(this,t)}},F=function(){function t(t,e){var i,s;l.call(this,R),this._initInstanceVars(),this.$opts=(i={},s=v(),Object.keys(s).forEach((function(t){if(Object.prototype.hasOwnProperty.call(s[t],"default")){var e=s[t].default;i[t]="function"==typeof e?e():e}})),i),this._mergeOptions(e),this._events={keyup:this._keyPress.bind(this),click:this._cvsMouseClick.bind(this),mousedown:this._cvsMouseDown.bind(this),mousemove:this._cvsMouseMove.bind(this),mouseup:this._cvsMouseUp.bind(this),contextmenu:this._cvsMouseClick.bind(this)},t&&this.mount(t)}return t.prototype._initInstanceVars=function(){Object.assign(this,{isEventsListening:!1,drawing:!1,needDrag:!0,dragging:!1,modifying:!1,operateCursor:null,lastMoveEvent:null,newPath:{},value:[],paths:[],curSingleType:"",pathPointsCoincide:!1,hasInvertPath:!1,choseIndex:-1,resizeTicker:0})},t.prototype._init=function(){var t=document.createElement("canvas");t.getContext&&(l.call(this,A),t.className="canvas-roi",t.tabIndex=99999*(1+Math.random()),t.style.cssText="outline: none;transform-origin: 0 0;",this.$cvs=t,this.$ctx=this.$cvs.getContext("2d"),this.resetCanvas(),this.$el.appendChild(this.$cvs),this._addEventHandler(this.$opts.readonly),this.$opts.autoFit&&this._initObserver(),this._emitEvent("ready"))},t.prototype._initObserver=function(){this.$el&&(this._ElObserver=new ResizeObserver(this._sizeChangeWatcher.bind(this)),this._ElObserver.observe(this.$el))},t.prototype._sizeChangeWatcher=function(){var t=this;clearTimeout(this.resizeTicker),this.resizeTicker=window.setTimeout((function(){t._emitEvent("resize"),t.resetCanvas()}),50)},t.prototype._autoFitChange=function(t){return t?this._ElObserver?this._ElObserver.observe(this.$el):this._initObserver():this._ElObserver.unobserve(this.$el)},t.prototype._mergeOptions=function(t){var e=this;if(t){var i=Object.prototype,s=i.hasOwnProperty,n=i.toString;Object.keys(t).forEach((function(i){s.call(e.$opts,i)&&"[object Object]"===n.call(t[i])&&e.$opts[i]?Object.assign(e.$opts[i],t[i]):e.$opts[i]=t[i]})),this._checkSingleType()}},t.prototype._emitEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.$opts[t];"function"==typeof s&&s.apply(void 0,e)},t.prototype._checkSingleType=function(){var t=this.$opts,e=t.allowTypes,i=t.singleType,s=t.currentType;this.curSingleType=i&&e.includes(s)?s:"",this.curSingleType&&this._resetChooseState()},t.prototype._isPathMax=function(){return this.$opts.maxPath>0&&this.paths.length>=this.$opts.maxPath},t.prototype._isSingleTypeAllow=function(t){var e=t?n:s;return!this.$opts.singleType||this.curSingleType&&e.includes(this.curSingleType)},t.prototype._floatToFixed=function(t){var e=this.$opts.digits;if(e<1)return t;var i=Math.pow(10,e);return Math.round(t*i)/i},t.prototype._emitValue=function(t,e){void 0===t&&(t="add"),void 0===e&&(e=0);var i=this.paths;this._completePathsInfo(i),this._emitEvent("input",this._switchCoordsScale(i)),this._emitEvent("change",t,e)},t.prototype._completePathsInfo=function(t){var e=this;t.forEach((function(t){var i=t.type,s=t.points,n={};if("rect"===i){var o=a(s[0],s[1]);n={points:o,start:e.scale(o[0]),width:e.scale({x:o[1].x-o[0].x,y:0}).x,height:e.scale({x:0,y:o[1].y-o[0].y}).y}}else if("circle"===i){var h=r(s[0],s[1]);n={center:e.scale(s[0]),radius:h,scaleRadius:e.scale({x:h,y:0}).x}}Object.assign(t,n)}))},t.prototype._switchCoordsScale=function(t,e){var i,s=this,n=(i=t,JSON.parse(JSON.stringify(i)));return n.forEach((function(t){var i=t.points;Array.isArray(i)&&(t.points=i.map((function(t){return e?s.invert(t):s.scale(t)})))})),n},t.prototype._addEventHandler=function(t){var e=this;Object.keys(this._events).forEach((function(i){return(!t||"mouseup"===i)&&e.$cvs.addEventListener(i,e._events[i])})),this.isEventsListening=!0},t.prototype._removeEventHandler=function(t){var e=this;Object.keys(this._events).forEach((function(i){return(t||"mouseup"!==i)&&e.$cvs.removeEventListener(i,e._events[i])})),this.isEventsListening=!1},t.prototype._resetNewPath=function(){Object.assign(this,{drawing:!1,needDrag:!1,dragging:!1,newPath:{},pathPointsCoincide:!1})},t.prototype._createNewPath=function(t,e,i){void 0===e&&(e="rect"),void 0===i&&(i=!0),this.drawing=!0,this.needDrag=i,Object.assign(this.newPath,{type:e,points:[t],inner:!0}),this._emitEvent("draw-start",e,t)},t.prototype._addNewPath=function(){this._emitEvent("draw-end"),this.paths.unshift(this.newPath),this._emitValue(),!this.$opts.singleType&&this.choosePath(0),this._resetNewPath()},t.prototype._resetChooseState=function(){this.choosePath(-1)},t.prototype._deletePath=function(){if(!(this.choseIndex<0)){var t=this.choseIndex;this.paths.splice(t,1),this._resetChooseState(),this._checkMouseCanOperate(),this._emitValue("delete",t)}},t.prototype._invertChosePath=function(){var t=this.choseIndex;t>=0&&(this.paths[t].inner=!this.paths[t].inner),this._emitValue("modify",t)},t.prototype.mount=function(t){this.$el="string"==typeof t?document.querySelector(t):t,this.$el instanceof HTMLElement?this._init():console.warn("the param element should be an HTMLElement")},t.prototype.resetOptions=function(t){var e=this.$opts.autoFit;this._mergeOptions(t),t.globalStyles&&this._setCtxStyles(),(t.width!==this.$opts.width||t.height!==this.$opts.height)&&this.resetCanvas(),t.readonly?this.isEventsListening&&this._removeEventHandler():this._addEventHandler(),this.$opts.autoFit!==e&&this._autoFitChange(this.$opts.autoFit),this.redrawCanvas(!0)},t.prototype.resetCanvas=function(){var t=this.$el,e=t.offsetWidth,i=t.offsetHeight,s=this.$opts,n=s.canvasScale,a=s.width,o=s.height,r=a||e,h=i||o;this.$size={width:r,height:h},this.$cvsSize={width:r*n,height:h*n},Object.assign(this.$cvs,this.$cvsSize),Object.assign(this.$cvs.style,{width:100*n+"%",height:100*n+"%",transform:"scale("+1/n+")"}),this.setValue(this.value),this._setCtxStyles(),this._drawRoiPaths()},t.prototype.scale=function(t,e){var i=e?this.$size:this.$cvsSize,s=i.width,n=i.height;return{x:this._floatToFixed(t.x/s),y:this._floatToFixed(t.y/n)}},t.prototype.invert=function(t,e){var i=e?this.$size:this.$cvsSize,s=i.width,n=i.height;return{x:Math.round(t.x*s),y:Math.round(t.y*n)}},t.prototype.setValue=function(t){Array.isArray(t)&&(this.value=t,this.paths=this._switchCoordsScale(t,!0),this._drawRoiPaths())},t.prototype.choosePath=function(t){this.choseIndex=this.paths[t]?t:-1,this._emitEvent("choose",this.choseIndex),this._drawRoiPaths()},t.prototype.clearCanvas=function(){this.$ctx&&this.$ctx.clearRect(0,0,this.$cvs.width,this.$cvs.height)},t.prototype.redrawCanvas=function(t){this._drawRoiPaths(null,!t)},t.prototype.exportImageFromCanvas=function(t){this.$cvs.toBlob((function(e){t(e?window.URL.createObjectURL(e):"")}))},t.prototype.customDrawing=function(t){"function"==typeof t&&(this.$ctx.save(),t.call(this,this),this.redrawCanvas(),this.$ctx.restore())},t.prototype.destroy=function(){this._removeEventHandler(),this.$el.removeChild(this.$cvs),delete this.$ctx,delete this.$cvs},t}();!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(".canvas-roi {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  overflow: hidden;\r\n}");var W,D=v(),L={name:"CanvasRoi",props:f({options:{type:Object,default:function(){return{}}},value:{type:Array,default:function(){return[]}}},D),data:function(){return{$instanceId:+new Date+Math.random(),$roi:null,selfCurrentType:""}},mounted:function(){this.$roi=new F(this.$el,this.handledOptions),this.value&&this.updateValue(this.value)},destroy:function(){this.$roi&&this.$roi.destroy()},computed:{handledEvents:function(){var t=this,e={};return i.forEach((function(i){e[i]=t.emitEvent.bind(t,i)})),e},handledOptions:function(){return f(f(f({},this.$props),this.options),this.handledEvents)}},watch:{value:"updateValue",handledOptions:"resetVueOptions"},methods:f({callInstanceMethod:function(t){for(var e,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return this.$roi?(e=this.$roi)[t].apply(e,i):void 0},updateValue:function(t){this.callInstanceMethod("setValue",t)},emitEvent:function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.options[t]||this[t];"function"==typeof s&&s.apply(this,e),this.$emit.apply(this,y([t],e))},resetVueOptions:function(t){this.callInstanceMethod("resetOptions",t)}},(W={},e.forEach((function(t){W[t]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this.callInstanceMethod.apply(this,y([t],e))}})),W)),render:function(t){return t("div",{class:"canvas-roi",attrs:{"data-id":this.$instanceId}},this.$slots.default)},install:function(t){t.component(F.name,F)}};t.CanvasRoi=F,t.default=L,t.eventNames=i,t.optionsTypes=v,t.publicMethods=e,Object.defineProperty(t,"__esModule",{value:!0})}));
